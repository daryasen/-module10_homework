const xml = `
<list>
  <student>
    <name lang="en">
      <first>Ivan</first>
      <second>Ivanov</second>
    </name>
    <age>35</age>
    <prof>teacher</prof>
  </student>
  <student>
    <name lang="ru">
      <first>Петр</first>
      <second>Петров</second>
    </name>
    <age>58</age>
    <prof>driver</prof>
  </student>
</list>
`;

// Функция для преобразования XML в JS-объект
function parseXML(xml, callback) {
  const parser = new xml2js.Parser();
  parser.parseString(xml, callback);
}

// Преобразование XML в JS-объект
parseXML(xml, (err, result) => {
  if (err) {
    console.error('Ошибка при преобразовании XML:', err);
  } else {
    const students = result.list.student.map((student) => {
      const name = student.name[0];
      const lang = name.$.lang;
      const first = name.first[0];
      const second = name.second[0];
      const age = parseInt(student.age[0], 10);
      const prof = student.prof[0];

      return { name: `${first} ${second}`, age, prof, lang };
    });

    const jsObject = { list: students };
    console.log(jsObject);
  }
});
